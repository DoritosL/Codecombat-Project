{"version":3,"sources":["app/lib/aether_utils.coffee"],"names":[],"mappings":";AAAA;;AAAA,QAAQ,QAAR;;AACA,QAAQ,OAAR;;AAEA,QAAQ,QAAQ,YAAR;;AAER,MAAM,CAAC,SAAP,CAAiB,QAAjB,EAA2B,QAAQ,gBAAR,CAA3B;;AACA,MAAM,CAAC,SAAP,CAAiB,GAAjB,EAAsB,CAAtB;;AAEA,MAAM,CAAC,OAAO,CAAC,mBAAf,GAAqC,SAAC,OAAD;AACnC;EAAA,KAA8E,OAAO,CAAC,YAAtF;AAAA,UAAU,UAAM,sDAAN,EAAV;;EACA,KAA8E,OAAO,CAAC,YAAtF;AAAA,UAAU,UAAM,sDAAN,EAAV;;EAEA,gBACE;IAAA,cAAc,OAAO,CAAC,YAAtB;IACA,YAAY,CAAI,OAAO,CAAC,cADxB;IAEA,aAAa,QAAQ,OAAO,CAAC,WAAhB,CAFb;IAGA,mBAAmB,IAHnB;IAIA,6BAA6B,IAJ7B;IAKA,oBAAoB,OAAO,CAAC,YAAR,KAAwB,MAL5C;IAMA,aAAa,IANb;IAOA,oBAAoB,IAPpB;IAQA,SAAS,CAAC,QAAD,EAAW,GAAX,CART;IASA,UACE;MAAA,aAAa;QAAC,OAAO,QAAR;OAAb;MACA,aAAa;QAAC,OAAO,QAAR;OADb;MAEA,aAAa;QAAC,OAAO,QAAR;OAFb;MAGA,aAAa;QAAC,OAAO,QAAR;OAHb;MAIA,aAAa;QAAC,OAAO,QAAR;OAJb;MAKA,gBAAgB;QAAC,OAAO,QAAR;OALhB;MAMA,oBAAoB;QAAC,OAAO,OAAR;OANpB;KAVF;IAiBA,gBAAgB,OAAO,CAAC,cAjBxB;IAmBA,gBAAgB,IAAI,IAAJ,GAAW,IAnB3B;IAoBA,UAAU,OAAO,CAAC,YApBlB;IAqBA,gBAAgB,IArBhB;;EAsBF,aAAa,kBAAmB,QAAO,CAAC,YAAR;EAChC,KAAO,UAAP;IACE,OAAO,CAAC,IAAR,CAAa,oBAAkB,OAAO,CAAC,YAA1B,GAAuC,8DAApD;IACA,aAAa,GAFf;;EAGA,IAAG,OAAO,CAAC,kBAAR,IAA+B,CAAI,CAAC,CAAC,OAAF,CAAU,OAAO,CAAC,kBAAlB,EAAsC,UAAtC,CAAtC;IACE,OAAO,CAAC,KAAR,CAAc,2EAAyE,OAAO,CAAC,YAAjF,GAA8F,SAA9F,GAAuG,UAAvG,GAAkH,iBAAlH,GAAmI,OAAO,CAAC,kBAA3I,GAA8J,GAA5K;IACA,aAAa,OAAO,CAAC,mBAFvB;;EAGA,aAAa,CAAC,kBAAd,GAAmC,UAAU,CAAC,KAAX;AAEnC,SAAO;AApC4B;;AAuCrC,qBACE;EAAA,MAAM,CAAC,SAAD,EAAY,SAAZ,EAAuB,MAAvB,CAAN;EACA,SAAS,CAAC,iBAAD,CADT;EAEA,eAAe,CAAC,WAAD,CAFf;EAGA,UAAU,CAAC,MAAD,CAHV;EAIA,eAAe,CAAC,OAAD,EAAU,QAAV,CAJf;EAKA,kBAAkB,CAAC,OAAD,CALlB;EAMA,mBAAmB,CAAC,OAAD,EAAU,QAAV,EAAoB,OAApB,EAA6B,OAA7B,EAAsC,MAAtC,CANnB;EAOA,YAAY,CAAC,QAAD,CAPZ;EASA,cAAc,EATd;EAUA,MAAM,EAVN;EAWA,qBAAqB,EAXrB;EAYA,QAAQ,EAZR;EAaA,iBAAiB,EAbjB;EAcA,KAAK,EAdL","file":"public/javascripts/app/lib/aether_utils.js","sourcesContent":["require 'aether'\nrequire 'esper'\n\nutils = require 'core/utils'\n\nAether.addGlobal 'Vector', require './world/vector'\nAether.addGlobal '_', _\n\nmodule.exports.createAetherOptions = (options) ->\n  throw new Error 'Specify a function name to create an Aether instance' unless options.functionName\n  throw new Error 'Specify a code language to create an Aether instance' unless options.codeLanguage\n\n  aetherOptions =\n    functionName: options.functionName\n    protectAPI: not options.skipProtectAPI\n    includeFlow: Boolean options.includeFlow\n    noVariablesInFlow: true\n    skipDuplicateUserInfoInFlow: true  # Optimization that won't work if we are stepping with frames\n    yieldConditionally: options.functionName is 'plan'\n    simpleLoops: true\n    whileTrueAutoYield: true\n    globals: ['Vector', '_']\n    problems:\n      jshint_W040: {level: 'ignore'}\n      jshint_W030: {level: 'ignore'}  # aether_NoEffect instead\n      jshint_W038: {level: 'ignore'}  # eliminates hoisting problems\n      jshint_W091: {level: 'ignore'}  # eliminates more hoisting problems\n      jshint_E043: {level: 'ignore'}  # https://github.com/codecombat/codecombat/issues/813 -- since we can't actually tell JSHint to really ignore things\n      jshint_Unknown: {level: 'ignore'}  # E043 also triggers Unknown, so ignore that, too\n      aether_MissingThis: {level: 'error'}\n    problemContext: options.problemContext\n    #functionParameters: # TODOOOOO\n    executionLimit: 3 * 1000 * 1000\n    language: options.codeLanguage\n    useInterpreter: true\n  parameters = functionParameters[options.functionName]\n  unless parameters\n    console.warn \"Unknown method #{options.functionName}: please add function parameters to lib/aether_utils.coffee.\"\n    parameters = []\n  if options.functionParameters and not _.isEqual options.functionParameters, parameters\n    console.error \"Update lib/aether_utils.coffee with the right function parameters for #{options.functionName} (had: #{parameters} but this gave #{options.functionParameters}.\"\n    parameters = options.functionParameters\n  aetherOptions.functionParameters = parameters.slice()\n  #console.log 'creating aether with options', aetherOptions\n  return aetherOptions\n\n# TODO: figure out some way of saving this info dynamically so that we don't have to hard-code it: #1329\nfunctionParameters =\n  hear: ['speaker', 'message', 'data']\n  makeBid: ['tileGroupLetter']\n  findCentroids: ['centroids']\n  isFriend: ['name']\n  evaluateBoard: ['board', 'player']\n  getPossibleMoves: ['board']\n  minimax_alphaBeta: ['board', 'player', 'depth', 'alpha', 'beta']\n  distanceTo: ['target']\n\n  chooseAction: []\n  plan: []\n  initializeCentroids: []\n  update: []\n  getNearestEnemy: []\n  die: []\n"]}