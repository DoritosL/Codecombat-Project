{"version":3,"sources":["app/lib/surface/Letterbox.coffee"],"names":[],"mappings":";AAAA;EAAA;;;AAAA,MAAM,CAAC,OAAP,GAAuB;;;sBACrB,gBACE;IAAA,uBAAuB,gBAAvB;;;EAEW,mBAAC,OAAD;AACX;IAAA;IACA,IAAC,WAAD;IACA,IAAC,YAAD,GAAe,OAAO,CAAC;IACvB,IAAC,aAAD,GAAgB,OAAO,CAAC;IACxB,MAA2D,IAAC,YAAD,IAAiB,IAAC,aAA7E;MAAA,OAAO,CAAC,KAAR,CAAc,qCAAd;;IACA,IAAC,MAAD;AACA;AAAA;;MAAA,QAAQ,CAAC,QAAQ,CAAC,SAAlB,CAA4B,OAA5B,EAAqC,IAAE,MAAvC,EAA8C,IAA9C;AAAA;EAPW;;sBASb,QAAO;IACL,IAAC,aAAD,GAAgB,IAAC,cAAD,GAAiB;IACjC,IAAC,YAAD,GAAe,OAAO,IAAC;IACvB,IAAC,WAAD,GAAkB,YAAQ,CAAC,KAAT;IAClB,IAAC,WAAU,CAAC,QAAQ,CAAC,SAArB,CAA+B,OAA/B,CAAuC,CAAC,IAAxC,CAA6C,CAA7C,EAAgD,CAAhD,EAAmD,IAAC,YAApD,EAAiE,IAAC,YAAlE;IACA,IAAC,WAAD,GAAc,IAAC,WAAU,CAAC,KAAZ;IACd,IAAC,WAAU,CAAC,CAAZ,GAAgB,IAAC,WAAU,CAAC,CAAZ,GAAgB;IAChC,IAAC,WAAU,CAAC,CAAZ,GAAgB,CAAC,IAAC;IAClB,IAAC,WAAU,CAAC,CAAZ,GAAgB,IAAC;WACjB,IAAC,SAAD,CAAU,IAAC,WAAX,EAAuB,IAAC,WAAxB;EATK;;sBAWP,iBAAgB,SAAC,CAAD;AACd;IAAA,IAAI,QAAQ,CAAC;IACb,CAAC,CAAC,YAAF,CAAe,IAAC,WAAhB;IACA,CAAC,CAAC,YAAF,CAAe,IAAC,WAAhB;IACA,SAAY,CAAC,CAAC,EAAL,GAAa,CAAb,GAAoB,CAAC,IAAC;IAC/B,SAAY,CAAC,CAAC,EAAL,GAAa,IAAC,aAAD,GAAgB,IAAC,YAA9B,GAA+C,IAAC;IACzD,WAAW;IACX,OAAO,QAAQ,CAAC,IAAI,CAAC;IACrB,CAAC,CAAC,GAAF,CAAM,IAAC,WAAP,CAAkB,CAAC,EAAnB,CAAsB;MAAC,GAAG,MAAJ;KAAtB,EAAmC,QAAnC,EAA6C,IAA7C;WACA,CAAC,CAAC,GAAF,CAAM,IAAC,WAAP,CAAkB,CAAC,EAAnB,CAAsB;MAAC,GAAG,MAAJ;KAAtB,EAAmC,QAAnC,EAA6C,IAA7C;EATc;;sBAWhB,UAAS;AACP;AAAA;AAAA;SAAA;;mBAAA,QAAQ,CAAC,QAAQ,CAAC,WAAlB,CAA8B,OAA9B,EAAuC,IAAE,MAAzC,EAAgD,IAAhD;AAAA;;EADO;;;;GAnC8B,QAAQ,CAAC","file":"public/javascripts/app/lib/surface/Letterbox.js","sourcesContent":["module.exports = class Letterbox extends createjs.Container\n  subscriptions:\n    'level:set-letterbox': 'onSetLetterbox'\n\n  constructor: (options) ->\n    super()\n    @initialize()\n    @canvasWidth = options.canvasWidth\n    @canvasHeight = options.canvasHeight\n    console.error 'Letterbox needs canvasWidth/Height.' unless @canvasWidth and @canvasHeight\n    @build()\n    Backbone.Mediator.subscribe(channel, @[func], @) for channel, func of @subscriptions\n\n  build: ->\n    @mouseEnabled = @mouseChildren = false\n    @matteHeight = 0.10 * @canvasHeight\n    @upperMatte = new createjs.Shape()\n    @upperMatte.graphics.beginFill('black').rect(0, 0, @canvasWidth, @matteHeight)\n    @lowerMatte = @upperMatte.clone()\n    @upperMatte.x = @lowerMatte.x = 0\n    @upperMatte.y = -@matteHeight\n    @lowerMatte.y = @canvasHeight\n    @addChild @upperMatte, @lowerMatte\n\n  onSetLetterbox: (e) ->\n    T = createjs.Tween\n    T.removeTweens @upperMatte\n    T.removeTweens @lowerMatte\n    upperY = if e.on then 0 else -@matteHeight\n    lowerY = if e.on then @canvasHeight - @matteHeight else @canvasHeight\n    interval = 700\n    ease = createjs.Ease.cubicOut\n    T.get(@upperMatte).to({y: upperY}, interval, ease)\n    T.get(@lowerMatte).to({y: lowerY}, interval, ease)\n\n  destroy: ->\n    Backbone.Mediator.unsubscribe(channel, @[func], @) for channel, func of @subscriptions\n"]}