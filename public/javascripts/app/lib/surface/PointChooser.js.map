{"version":3,"sources":["app/lib/surface/PointChooser.coffee"],"names":[],"mappings":";AAAA;EAAA;;;;AAAA,YAAY,QAAQ,gBAAR;;AAEZ,MAAM,CAAC,OAAP,GAAuB;;;EACR,sBAAC,OAAD;IAAC,IAAC,WAAD;;IACZ;IACA,IAAC,WAAD;IACA,IAAC,QAAO,CAAC,KAAK,CAAC,gBAAf,CAAgC,gBAAhC,EAAkD,IAAC,YAAnD;IACA,IAAC,QAAO,CAAC,MAAM,CAAC,YAAhB,GAA+B;EAJpB;;yBAMb,UAAS;IACP,IAAC,QAAO,CAAC,KAAK,CAAC,mBAAf,CAAmC,gBAAnC,EAAqD,IAAC,YAAtD;WACA;EAFO;;yBAKT,WAAU,SAAC,KAAD;IAAC,IAAC,SAAD;WACT,IAAC,YAAD;EADQ;;yBAGV,aAAY;IACV,IAAC,MAAD,GAAa,YAAQ,CAAC,KAAT;IACb,IAAC,MAAK,CAAC,KAAP,GAAe;IACf,IAAC,MAAK,CAAC,YAAP,GAAsB;IACtB,IAAC,MAAK,CAAC,QAAQ,CAAC,cAAhB,CAA+B,CAA/B,EAAkC,OAAlC,CAA0C,CAAC,WAA3C,CAAuD,SAAvD,CAAiE,CAAC,SAAlE,CAA4E,SAA5E;WACA,IAAC,MAAK,CAAC,QAAQ,CAAC,UAAhB,CAA2B,CAA3B,EAA8B,CAA9B,EAAiC,CAAjC,CAAmC,CAAC,OAApC;EALU;;yBAOZ,cAAa,SAAC,CAAD;IACX,KAAc,GAAG,CAAC,KAAlB;AAAA;;IACA,IAAC,SAAD,CAAU,IAAC,QAAO,CAAC,MAAM,CAAC,aAAhB,CAA8B;MAAC,GAAG,CAAC,CAAC,MAAN;MAAc,GAAG,CAAC,CAAC,MAAnB;KAA9B,CAAV;WACA,QAAQ,CAAC,QAAQ,CAAC,OAAlB,CAA0B,sBAA1B,EAAkD;MAAA,OAAO,IAAC,MAAR;KAAlD;EAHW;;yBAKb,cAAa;AACX;IAAA,MAAM,IAAC,QAAO,CAAC,MAAM,CAAC,cAAhB,CAA+B,IAAC,MAAhC;IACN,KAA6C,IAAC,MAAK,CAAC,MAApD;MAAA,IAAC,QAAO,CAAC,YAAY,CAAC,QAAtB,CAA+B,IAAC,MAAhC;;IACA,IAAC,MAAK,CAAC,CAAP,GAAW,GAAG,CAAC;WACf,IAAC,MAAK,CAAC,CAAP,GAAW,GAAG,CAAC;EAJJ;;;;GA3B6B","file":"public/javascripts/app/lib/surface/PointChooser.js","sourcesContent":["CocoClass = require 'core/CocoClass'\n\nmodule.exports = class PointChooser extends CocoClass\n  constructor: (@options) ->\n    super()\n    @buildShape()\n    @options.stage.addEventListener 'stagemousedown', @onMouseDown\n    @options.camera.dragDisabled = true\n\n  destroy: ->\n    @options.stage.removeEventListener 'stagemousedown', @onMouseDown\n    super()\n\n  # Called also from WorldSelectModal\n  setPoint: (@point) ->\n    @updateShape()\n\n  buildShape: ->\n    @shape = new createjs.Shape()\n    @shape.alpha = 0.9\n    @shape.mouseEnabled = false\n    @shape.graphics.setStrokeStyle(1, 'round').beginStroke('#000000').beginFill('#fedcba')\n    @shape.graphics.drawCircle(0, 0, 4).endFill()\n\n  onMouseDown: (e) =>\n    return unless key.shift\n    @setPoint @options.camera.screenToWorld {x: e.stageX, y: e.stageY}\n    Backbone.Mediator.publish 'surface:choose-point', point: @point\n\n  updateShape: ->\n    sup = @options.camera.worldToSurface @point\n    @options.surfaceLayer.addChild @shape unless @shape.parent\n    @shape.x = sup.x\n    @shape.y = sup.y\n"]}