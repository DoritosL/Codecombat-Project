{"version":3,"sources":["app/collections/Users.coffee"],"names":[],"mappings":";AAAA;EAAA;;;AAAA,OAAO,QAAQ,aAAR;;AACP,iBAAiB,QAAQ,4BAAR;;AAEjB,MAAM,CAAC,OAAP,GAAuB;;;;;;;kBACrB,QAAO;;kBACP,MAAK;;kBAEL,oBAAmB,SAAC,SAAD,EAAY,OAAZ;AACjB;;MAD6B,UAAQ;;IACrC,IAAG,OAAO,CAAC,aAAX;MACE,OAAO,OAAO,CAAC;MACf,IAAC,SAAD,CAAU,IAAV,EAAa,MAAb,EAAqB,IAAC,mBAAtB,EAFF;;IAGA,cAAc,SAAS,CAAC,EAAV,IAAgB;IAC9B,QAAQ;IACR,OAAO;IACP,OAAO,CAAC,CAAC,IAAF,CAAO,SAAS,CAAC,GAAV,CAAc,SAAd,CAAP;IACP,OAAO,CAAC,GAAR,GAAc,mBAAiB,WAAjB,GAA6B;;MAC3C,OAAO,CAAC,OAAQ;;IAChB,OAAO,CAAC,IAAI,CAAC,WAAb,GAA2B;IAC3B,OAAO,CAAC,MAAR,GAAiB;IACjB,SAAS;AACT,WAAM,OAAO,IAAb;MACE,UAAU,CAAC,CAAC,SAAF,CAAY,OAAZ;MACV,OAAO,CAAC,IAAI,CAAC,UAAb,GAA0B;MAC1B,MAAM,CAAC,IAAP,CAAY,IAAC,MAAD,CAAO,OAAP,CAAZ;MACA,QAAQ;IAJV;AAKA,WAAO;EAlBU;;kBAoBnB,qBAAoB;IAClB,IAAC,OAAD,CAAQ,IAAC,OAAD,CAAQ,SAAC,IAAD;aACd,IAAI,CAAC,GAAL,CAAS,SAAT;IADc,CAAR,CAAR;WAEA;EAHkB;;kBAKpB,SAAQ,SAAC,IAAD;IACN,KAAuB,IAAvB;AAAA,aAAO,IAAC,MAAD,GAAP;;IACA,OAAO,IAAI,CAAC,WAAL;AACP,WAAO,IAAC,OAAD,CAAQ,SAAC,IAAD;AACb;aAAA,IAAI,CAAC,SAAL,EAAgB,CAAC,WAAjB,EAA8B,CAAC,OAA/B,CAAuC,IAAvC,IAA+C,CAAC,CAAhD,IAAqD,2CAAqB,EAArB,CAAwB,CAAC,OAAzB,CAAiC,IAAjC,IAAyC,CAAC;IADlF,CAAR;EAHD;;;;GA7B2B","file":"public/javascripts/app/collections/Users.js","sourcesContent":["User = require 'models/User'\nCocoCollection = require 'collections/CocoCollection'\n\nmodule.exports = class Users extends CocoCollection\n  model: User\n  url: '/db/user'\n    \n  fetchForClassroom: (classroom, options={}) ->\n    if options.removeDeleted\n      delete options.removeDeleted\n      @listenTo @, 'sync', @removeDeletedUsers\n    classroomID = classroom.id or classroom\n    limit = 10\n    skip = 0\n    size = _.size(classroom.get('members'))\n    options.url = \"/db/classroom/#{classroomID}/members\"\n    options.data ?= {}\n    options.data.memberLimit = limit\n    options.remove = false\n    jqxhrs = []\n    while skip < size\n      options = _.cloneDeep(options)\n      options.data.memberSkip = skip\n      jqxhrs.push(@fetch(options))\n      skip += limit\n    return jqxhrs\n\n  removeDeletedUsers: ->\n    @remove @filter (user) ->\n      user.get('deleted')\n    true\n\n  search: (term) ->\n    return @slice() unless term\n    term = term.toLowerCase()\n    return @filter (user) ->\n      user.broadName().toLowerCase().indexOf(term) > -1 or (user.get('email') ? '').indexOf(term) > -1 \n"]}