{"version":3,"sources":["app/views/ladder/MainLadderView.coffee"],"names":[],"mappings":";AAAA;EAAA;;;AAAA,WAAW,QAAQ,qBAAR;;AACX,WAAW,QAAQ,4BAAR;;AACX,eAAe,QAAQ,qBAAR;;AACf,iBAAiB,QAAQ,4BAAR;;AAEX;;;oCACJ,MAAK;;oCACL,QAAO;;EAEM,iCAAC,KAAD;IACX;IACA,IAAC,IAAD,GAAO,cAAY,EAAE,CAAC,EAAf,GAAkB;EAFd;;;;GAJuB;;AAQtC,MAAM,CAAC,OAAP,GAAuB;;;;;;;2BACrB,KAAI;;2BACJ,WAAU;;2BAEV,aAAY;IACV,IAAC,eAAD,GAAkB;IAClB,IAAC,kBAAD,GAAqB;IACrB,IAAC,UAAD,GAAa;IAEb,IAAC,SAAD,GAAY,IAAC,WAAU,CAAC,cAAZ,CAA+B,6BAA/B,EAA0D,eAA1D,EAA2E;MAAC,OAAO,KAAR;KAA3E,EAA2F,CAA3F,CAA6F,CAAC;IAC1G,IAAC,aAAD,CAAc,IAAC,SAAf,EAAyB,MAAzB,EAAiC,IAAC,iBAAlC;WAEA,IAAC,mBAAD;EARU;;2BAUZ,mBAAkB,SAAC,CAAD;AAChB;AAAA;AAAA;;MACE,IAAC,eAAe,QAAO,CAAC,GAAR,CAAY,SAAZ,EAAhB,gDAAiE,CAAE,kBAAzB,GAAuC,UAAvC,GAAuD;AADnG;WAEA,IAAC,OAAD;EAHgB;;2BAKlB,qBAAoB;AAClB;IAAA,UAAU;aAAA,SAAC,eAAD;AACR;QAAA,IAAU,KAAC,UAAX;AAAA;;AACA;;UACE,KAAC,kBAAkB,MAAK,CAAC,GAAN,CAAnB,GAAgC;YAAA,UAAU,KAAK,CAAC,QAAhB;YAA0B,UAAU,KAAK,CAAC,QAA1C;;AADlC;QAEA,IAAa,KAAC,WAAU,CAAC,QAAZ,EAAb;iBAAA,KAAC,OAAD;;MAJQ;IAAA;IAMV,WAAW;AACX;;AACE;AAAA;;QACE,QAAQ,CAAC,IAAT,CAAc,KAAK,CAAC,EAApB;AADF;AADF;IAGA,yBAAyB,IAAC,WAAU,CAAC,kBAAZ,CAA+B,aAA/B,EAA8C;MACrE,KAAK,yBADgE;MAErE,MAAM;QAAC,KAAK,QAAN;OAF+D;MAGrE,QAAQ,MAH6D;MAIrE,SAAS,OAJ4D;KAA9C,EAKtB,CALsB;WAMzB,sBAAsB,CAAC,IAAvB;EAjBkB;;;;GAnBwB;;AAsC9C,aAAa;EACX;IACE,MAAM,eADR;IAEE,YAAY,CAFd;IAGE,IAAI,eAHN;IAIE,OAAO,kEAJT;IAKE,aAAa,gIALf;GADW,EAQX;IACE,MAAM,UADR;IAEE,YAAY,CAFd;IAGE,IAAI,UAHN;IAIE,OAAO,qEAJT;IAKE,aAAa,8IALf;GARW,EAeX;IACE,MAAM,iBADR;IAEE,YAAY,CAFd;IAGE,IAAI,iBAHN;IAIE,OAAO,qEAJT;IAKE,aAAa,0EALf;GAfW,EAsBX;IACE,MAAM,iBADR;IAEE,YAAY,CAFd;IAGE,IAAI,iBAHN;IAIE,OAAO,qEAJT;IAKE,aAAa,+EALf;GAtBW,EA6BX;IACE,MAAM,4BADR;IAEE,YAAY,CAFd;IAGE,IAAI,4BAHN;IAIE,OAAO,kFAJT;IAKE,aAAa,6EALf;GA7BW,EAoCX;IACE,MAAM,YADR;IAEE,YAAY,CAFd;IAGE,IAAI,YAHN;IAIE,OAAO,8DAJT;IAKE,aAAa,gGALf;GApCW;;;AA6Cb,YAAY;EACV;IAAC,IAAI,aAAL;IAAoB,MAAM,oBAA1B;IAAgD,aAAa,2DAA7D;IAA0H,QAAQ,UAAlI;GADU","file":"public/javascripts/app/views/ladder/MainLadderView.js","sourcesContent":["RootView = require 'views/core/RootView'\ntemplate = require 'templates/play/ladder_home'\nLevelSession = require 'models/LevelSession'\nCocoCollection = require 'collections/CocoCollection'\n\nclass LevelSessionsCollection extends CocoCollection\n  url: ''\n  model: LevelSession\n\n  constructor: (model) ->\n    super()\n    @url = \"/db/user/#{me.id}/level.sessions?project=state.complete,levelID\"\n\nmodule.exports = class MainLadderView extends RootView\n  id: 'main-ladder-view'\n  template: template\n\n  initialize: ->\n    @levelStatusMap = []\n    @levelPlayCountMap = []\n    @campaigns = campaigns\n\n    @sessions = @supermodel.loadCollection(new LevelSessionsCollection(), 'your_sessions', {cache: false}, 0).model\n    @listenToOnce @sessions, 'sync', @onSessionsLoaded\n\n    @getLevelPlayCounts()\n\n  onSessionsLoaded: (e) ->\n    for session in @sessions.models\n      @levelStatusMap[session.get('levelID')] = if session.get('state')?.complete then 'complete' else 'started'\n    @render()\n\n  getLevelPlayCounts: ->\n    success = (levelPlayCounts) =>\n      return if @destroyed\n      for level in levelPlayCounts\n        @levelPlayCountMap[level._id] = playtime: level.playtime, sessions: level.sessions\n      @render() if @supermodel.finished()\n\n    levelIDs = []\n    for campaign in campaigns\n      for level in campaign.levels\n        levelIDs.push level.id\n    levelPlayCountsRequest = @supermodel.addRequestResource 'play_counts', {\n      url: '/db/level/-/play_counts'\n      data: {ids: levelIDs}\n      method: 'POST'\n      success: success\n    }, 0\n    levelPlayCountsRequest.load()\n\nheroArenas = [\n  {\n    name: 'Ace of Coders'\n    difficulty: 3\n    id: 'ace-of-coders'\n    image: '/file/db/level/55de80407a57948705777e89/Ace-of-Coders-banner.png'\n    description: 'Battle for control over the icy treasure chests as your gigantic warrior marshals his armies against his mirror-match nemesis.'\n  }\n  {\n    name: 'Zero Sum'\n    difficulty: 3\n    id: 'zero-sum'\n    image: '/file/db/level/550363b4ec31df9c691ab629/MAR26-Banner_Zero%20Sum.png'\n    description: 'Unleash your coding creativity in both gold gathering and battle tactics in this alpine mirror match between red sorcerer and blue sorcerer.'\n  }\n  {\n    name: 'Cavern Survival'\n    difficulty: 1\n    id: 'cavern-survival'\n    image: '/file/db/level/544437e0645c0c0000c3291d/OCT30-Cavern%20Survival.png'\n    description: 'Stay alive longer than your multiplayer opponent amidst hordes of ogres!'\n  }\n  {\n    name: 'Dueling Grounds'\n    difficulty: 1\n    id: 'dueling-grounds'\n    image: '/file/db/level/5442ba0e1e835500007eb1c7/OCT27-Dueling%20Grounds.png'\n    description: 'Battle head-to-head against another hero in this basic beginner combat arena.'\n  }\n  {\n    name: 'Multiplayer Treasure Grove'\n    difficulty: 2\n    id: 'multiplayer-treasure-grove'\n    image: '/file/db/level/5469643c37600b40e0e09c5b/OCT27-Multiplayer%20Treasure%20Grove.png'\n    description: 'Mix collection, flags, and combat in this multiplayer coin-gathering arena.'\n  }\n  {\n    name: 'Harrowland'\n    difficulty: 2\n    id: 'harrowland'\n    image: '/file/db/level/54b83c2629843994803c838e/OCT27-Harrowland.png'\n    description: 'Go head-to-head against another player in this dueling arena--but watch out for their friends!'\n  }\n]\n\ncampaigns = [\n  {id: 'multiplayer', name: 'Multiplayer Arenas', description: '... in which you code head-to-head against other players.', levels: heroArenas}\n]\n"]}