{"version":3,"sources":["app/schemas/models/achievement.coffee"],"names":[],"mappings":"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","file":"public/javascripts/app/schemas/models/achievement.js","sourcesContent":["c = require './../schemas'\n\n# TODO add these: http://docs.mongodb.org/manual/reference/operator/query/\nMongoQueryOperatorSchema =\n  title: 'Query Operator'\n  type: 'object'\n  properties:\n    '$gt': type: 'number'\n    '$gte': type: 'number'\n    '$in': type: 'array'\n    '$lt': type: 'number'\n    '$lte': type: 'number'\n    '$ne': type: ['number', 'string']\n    '$nin': type: 'array'\n    '$exists': type: 'boolean'\n  additionalProperties: false\n\nMongoFindQuerySchema =\n  title: 'Query'\n  type: 'object'\n  patternProperties:\n    '^[-a-zA-Z0-9._]*$':\n      anyOf: [\n        {$ref: '#/definitions/mongoQueryOperator'},\n        {type: 'string'}\n        {type: 'object'}\n        {type: 'boolean'}\n      ]\n  properties: {}\n  additionalProperties: false\n  definitions: {}\n\nAchievementSchema = c.object()\nc.extendNamedProperties AchievementSchema\nc.extendBasicProperties AchievementSchema, 'achievement'\nc.extendSearchableProperties AchievementSchema\n\nAchievementSchema.default =\n  worth: 10\n  description: 'Probably the coolest you\\'ll ever get.'\n  difficulty: 1\n  recalculable: true\n  function: {}\n\n_.extend AchievementSchema.properties,\n  query:\n    #type:'object'\n    $ref: '#/definitions/mongoFindQuery'\n  worth: c.float()\n  collection: {type: 'string'}\n  description: c.shortString()\n  userField: c.shortString()\n  related: c.objectId(description: 'Related entity')\n  icon: {type: 'string', format: 'image-file', title: 'Icon', description: 'Image should be a 100x100 transparent png.'}\n  category:\n    enum: ['level', 'ladder', 'contributor']\n    description: 'For categorizing and display purposes'\n  difficulty: c.int\n    description: 'The higher the more difficult'\n  proportionalTo:\n    type: 'string'\n    description: 'For repeatables only. Denotes the field a repeatable achievement needs for its calculations'\n  recalculable:\n    type: 'boolean'\n    description: 'Deprecated: all achievements must be recalculable now. Used to need to be set to true before it is eligible for recalculation.'\n  function:\n    type: 'object'\n    description: 'Function that gives total experience for X amount achieved'\n    properties:\n      kind: {enum: ['linear', 'logarithmic', 'quadratic', 'pow'] }\n      parameters:\n        type: 'object'\n        default: { a: 1, b: 0, c: 0 }\n        properties:\n          a: {type: 'number' }\n          b: {type: 'number' }\n          c: {type: 'number' }\n        additionalProperties: true\n    default: {kind: 'linear', parameters: {}}\n    required: ['kind', 'parameters']\n    additionalProperties: false\n  i18n: {type: 'object', format: 'i18n', props: ['name', 'description'], description: 'Help translate this achievement'}\n  rewards: c.RewardSchema 'awarded by this achievement'\n  hidden: {type: 'boolean', description: 'Hide achievement from user if true'}\n  updated: c.stringDate({ description: 'When the achievement was changed in such a way that earned achievements should get updated.' })\n\n\n_.extend AchievementSchema, # Let's have these on the bottom\n  # TODO We really need some required properties in my opinion but this makes creating new achievements impossible as it is now\n  #required: ['name', 'description', 'query', 'worth', 'collection', 'userField', 'category', 'difficulty']\n  additionalProperties: false\n\nAchievementSchema.definitions = {}\nAchievementSchema.definitions['mongoQueryOperator'] = MongoQueryOperatorSchema\nAchievementSchema.definitions['mongoFindQuery'] = MongoFindQuerySchema\nc.extendTranslationCoverageProperties AchievementSchema\nc.extendPatchableProperties AchievementSchema\n\nmodule.exports = AchievementSchema\n"]}